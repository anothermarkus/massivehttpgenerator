<div class="container">
  <h1>Make Tarrifs Great Again</h1>
  
  <!-- Form for adding HTTP requests -->
  <form [formGroup]="transactionForm" (ngSubmit)="onSubmit()">
    <div formArrayName="httpRequests">
      <div *ngFor="let request of requests.controls; let i = index" [formGroupName]="i">
        <div class="http-request">
          <label for="method-{{i}}">Method</label>
          <!--<input id="method-{{i}}" formControlName="method" type="text" placeholder="HTTP Method (GET, POST, etc.)"> -->
          
          <select id="method-{{i}}" formControlName="method">
            <option value="GET">GET</option>
            <option value="POST">POST</option>
            <option value="PUT">PUT</option>
            <option value="PATCH">PUT</option>
            <option value="DELETE">DELETE</option>
          </select>
       

          <label for="url-{{i}}">URL</label>
          <input id="url-{{i}}" formControlName="url" type="text" placeholder="Request URL">

          <label for="body-{{i}}">Body (Optional)</label>
          <textarea id="body-{{i}}" formControlName="body" placeholder="Request Body"></textarea>
        </div>
      </div>
    </div>

    <!-- Add new HTTP request -->
    <button type="button" (click)="addHttpRequest()">Add Request</button>
    
    <!-- Remove last HTTP request -->
    <button type="button" (click)="removeHttpRequest()">Remove Last Request</button>


    <div class="file-upload">
      <!-- File input for CSV upload -->
      <label for="fileInput">Upload GUID CSV</label>
      <input type="file" id="fileInput" (change)="onFileChange($event)" />
    </div>

    <!-- Submit button -->
    <button type="submit" [disabled]="!transactionForm.valid || !guidList.length">
      Submit Transaction
    </button>
  </form>

  <div *ngIf="downloadLink">
    <h3>Download Results</h3>
    <button (click)="downloadCSV()">Download CSV</button>
  </div>

  <!-- Display list of GUIDs -->
  <div *ngIf="guidList.length > 0">
    <h3>Parsed GUIDs</h3>
    <ul>
      <li>{{ guidList.length }}</li>
    </ul>
  </div>
</div>

